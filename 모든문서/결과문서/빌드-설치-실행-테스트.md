# 빌드-설치-실행-테스트 따라하기 (아주 쉬운 버전)

이 문서는 **복사 + 붙여넣기 + Enter**만으로 진행할 수 있게 작성했습니다.

## 0. 먼저 준비해요 (한 번만)
아래 4가지를 설치해 주세요.

1. Git
2. Docker Desktop
3. Node.js 22 이상
4. Flutter SDK (최신 안정 버전)

설치가 끝나면 PowerShell(터미널)을 열고 아래를 입력해서 확인합니다.

```powershell
git --version
docker --version
node --version
flutter --version
```

에러가 없으면 준비 완료입니다.

## 1. 프로젝트 폴더로 이동

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP"
```

## 2. 환경 파일 만들기 (.env)
아래 2줄을 그대로 실행합니다.

```powershell
Copy-Item .env.example .env -Force
Copy-Item .env.production.example .env.production -Force
```

## 3. 데이터베이스 켜기 (PostgreSQL)

```powershell
docker compose up -d postgres
docker ps
```

`moavo-postgres`가 보이면 성공입니다.

## 4. 서버 설치 + 실행
새 PowerShell 창을 하나 더 열고(이름: 서버창) 아래를 순서대로 실행합니다.

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\server"
npm install
npm run prisma:generate
npm run prisma:migrate:dev -- --name init
npm run dev
```

서버창은 **계속 켜둡니다**.

다른 창에서 서버 확인:

```powershell
irm http://localhost:4000/api/v1/health
```

아래처럼 `status`가 `ok`면 성공입니다.

```text
status  : ok
service : moavo-server
```

## 5. 앱(app) 설치 + 실행 (웹으로 실행)
새 PowerShell 창(이름: 앱창)에서 실행:

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\app"
flutter pub get
flutter run -d chrome
```

브라우저가 열리면 앱 실행 성공입니다.

## 6. 관리자 웹(admin-web) 설치 + 실행
새 PowerShell 창(이름: 관리자창)에서 실행:

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\admin-web"
flutter pub get
flutter run -d chrome --web-port 3001
```

브라우저가 열리면 관리자 웹 실행 성공입니다.

## 7. 빌드(배포용 파일 만들기)

### 7-1) 서버 빌드

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\server"
npm run build
```

성공하면 `server/dist` 폴더가 생깁니다.

### 7-2) 앱 웹 빌드

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\app"
flutter build web
```

성공하면 `app/build/web` 폴더가 생깁니다.

### 7-3) 관리자 웹 빌드

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\admin-web"
flutter build web
```

성공하면 `admin-web/build/web` 폴더가 생깁니다.

## 8. 테스트

### 8-1) 서버 스모크 테스트

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\server"
npm run test:smoke
```

### 8-2) 앱 테스트

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\app"
flutter test
```

### 8-3) 관리자 웹 테스트

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP\admin-web"
flutter test
```

## 9. 다 끝났는지 확인 체크리스트
아래 4개가 모두 되면 완료입니다.

1. `http://localhost:4000/api/v1/health` 응답이 `status: ok`
2. 앱(Chrome) 실행됨
3. 관리자 웹(Chrome, 3001 포트) 실행됨
4. 빌드/테스트 명령에서 빨간 에러가 없음

## 10. 작업 종료(정리)
서버/앱/관리자창에서 `Ctrl + C`를 눌러 종료합니다.

DB까지 내리려면 루트 폴더에서:

```powershell
cd "D:\BBB WISHCAT PROGECT BBB2\MOAVO-Habit-MVP"
docker compose down
```
